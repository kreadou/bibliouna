{% extends 'publication/base.html' %}
{% load static %}
{% load crispy_forms_tags %}




{% block search %}


<script src="{% static 'publication/colorlib/js/jquery-3.3.1.min.js' %}"></script>

<style>
/*search box css start #1A4668here*/
.search-sec{
    background-color:LightGray;padding: 0.2rem;
}
.search-slt{
    display: block;
    width: 100%;
    font-size: 0.875rem;
    line-height: 1.5;
    color: #55595c;
    background-color: #fff;
    background-image: none;
    border: 1px solid #ccc;
    height: calc(3rem + 2px) !important;
    border-radius:0;
}
.wrn-btn{
    width: 100%;
    font-size: 16px;
    font-weight: 400;
    text-transform: capitalize;
    height: calc(3rem + 2px) !important;
    border-radius:0;
}
</style>

<section class="search-sec">
  <div class="container">
    <form class="form" method="POST" action="{% url 'publication:index' %}"> {% csrf_token %}
      <div class="row">
        <div class="col-lg-12">
          <div class="row">
            <div class="col-lg-2 col-md-1 col-sm-12 p-0">
              {{ form.type_publication|as_crispy_field }}
            </div>
            <div class="col-lg-2 col-md-3 col-sm-12 p-0">
              {{ form.categorie|as_crispy_field }}
            </div>
            <div class="col-lg-6 col-md-3 col-sm-12 p-0">
                {{ form.texte|as_crispy_field }}
            </div>
            <div class="col-lg-2 col-md-3 col-sm-12 p-0">
                <button type="button" class="btn btn-success" id="btn_rechercher">  Rechercher</button>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</section>
{%  endblock  %}

{% block content %}

<div class="container">
  <br>
  <div class="row">
    <div class="col-md-12">
      <div class="alert alert-dark" role="alert">
        <h5>{{ publication_list.count }} Resultat(s) pour {{ element_selectionne }}</h5>           
      </div>
    </div>
  </div>
</div>

<div class="content">
  <div class="container">
    <div class="row">
      <div class="col-md-2">

          <div class="card">
            <div class="card-header">
              <h5 class="card-title m-0">Featured</h5>
            </div>
            <div class="card-body">
              <h6 class="card-title">Special title treatment</h6>
                <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                <a href="#" class="btn btn-primary">Go somewhere</a>
            </div>
          </div>

          <div class="card card-primary card-outline">
            <div class="card-header">
              <h5 class="card-title m-0">Featured</h5>
            </div>
            <div class="card-body">
              <div class="filter-content">
                <div class="card-body">
                  <form>
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" value="">
                      <span class="form-check-label">
                        Mersedes Benz
                      </span>
                    </label> <!-- form-check.// -->
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" value="">
                      <span class="form-check-label">
                        Nissan Altima
                      </span>
                    </label>  <!-- form-check.// -->
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" value="">
                      <span class="form-check-label">
                        Another Brand
                      </span>
                    </label>  <!-- form-check.// -->
                  </form>
                </div> <!-- card-body.// -->
              </div>
            </div>
          </div>

          <div class="card card-primary card-outline">
            <div class="card-header">
              <h5 class="card-title m-0">Featured</h5>
            </div>
            <div class="card-body">
              <div class="filter-content">
                <div class="card-body">
                  <form>
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" value="">
                      <span class="form-check-label">
                        Mersedes Benz
                      </span>
                    </label> <!-- form-check.// -->
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" value="">
                      <span class="form-check-label">
                        Nissan Altima
                      </span>
                    </label>  <!-- form-check.// -->
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" value="">
                      <span class="form-check-label">
                        Another Brand
                      </span>
                    </label>  <!-- form-check.// -->
                  </form>
                </div> <!-- card-body.// -->
              </div>
            </div>
          </div>

          <div class="card card-primary card-outline">
            <div class="card-header">
              <h5 class="card-title m-0">Featured</h5>
            </div>
            <div class="card-body">
              <div class="filter-content">
                <div class="card-body">
                  <form>
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" value="">
                      <span class="form-check-label">
                        Mersedes Benz
                      </span>
                    </label> <!-- form-check.// -->
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" value="">
                      <span class="form-check-label">
                        Nissan Altima
                      </span>
                    </label>  <!-- form-check.// -->
                    <label class="form-check">
                      <input class="form-check-input" type="checkbox" value="">
                      <span class="form-check-label">
                        Another Brand
                      </span>
                    </label>  <!-- form-check.// -->
                  </form>
                </div> <!-- card-body.// -->
              </div>
            </div>
          </div>

      </div>

      <div class="col-md-10" id="list_donnee">
        {% for i in publication_list %}
          <div class="card mb-3" style="max-width: 100%px;">
            <div class="row g-0">
              <div class="col-md-4">
                {% if i.photo %}
                  <img class="img-rectangle" src="{{ MEDIA_URL }}{{ i.photo.url }}" width="100px" height="auto" alt="image description">
                {% endif %}
              </div>
              <div class="col-md-8">
                <div class="card-body">
                  <h5 class="card-title">{{ i.titre }}</h5>
                  <div class="card-text"></div>
                  <div class="card-text"><b>Auteur : </b><span class="badge rounded-pill bg-primary">{{ i.auteur }}</span></div>
                  <div class="card-text"><b>Spécialité : </b><span class="badge rounded-pill bg-primary">{{ i.specialite }}</span></div>
                  <div class="card-text"><b>Côte : </b><span class="badge rounded-pill bg-primary">{{ i.cote }}</span></div>
                  <div class="card-text"><b>Format(s) électronique(s) : </b><span class="badge rounded-pill bg-primary">{{ i.format_electronique }}</span></div>
                  <div class="card-text"><b>Date de soutenance : </b><span class="badge rounded-pill bg-primary">{{ i.date_soutenance }}</span></div>
                  <button type="button" class="btn btn-success btn-sm pull-right">{{ i.type_publication|title }}, voir plus</button>  

                  {% comment %}
                  <span class="badge bg-warning text-dark">Warning</span>
                  <span class="badge rounded-pill bg-primary">Primary</span>
                  <span class="badge rounded-pill bg-secondary">Secondary</span>
                  <span class="badge rounded-pill bg-success">Success</span>
                  <span class="badge rounded-pill bg-danger">Danger</span>
                  <span class="badge rounded-pill bg-warning text-dark">Warning</span>
                  <span class="badge rounded-pill bg-info text-dark">Info</span>
                  <span class="badge rounded-pill bg-light text-dark">Light</span>
                  <span class="badge rounded-pill bg-dark">Dark</span>   
                  {% endcomment %}
                </div>
              </div>
            </div>
          </div>
          {% empty %}

          {% endfor %}
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  $("#btn_rechercher").click(function(e){
    e.preventDefault()
    var id_type_publication = $("#id_type_publication").val();
    var id_categorie = $("#id_categorie").val();
    var id_texte = $("#id_texte").val();
    var url = "{% url 'publication:index' %}";
    $.ajax({
      url: url,
      data: {
        'id_type_publication': id_type_publication, 'id_categorie':id_categorie, 'id_texte':id_texte,
      },
      success: function (data) {
        $("#list_donnee").html();
        $("#list_donnee").html(data);
      }
    });
  });
</script>
{% endblock content %}
